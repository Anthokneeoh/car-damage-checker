(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{556:function(e,r,t){Promise.resolve().then(t.bind(t,7340))},7340:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return l}});var n=t(7437),i=t(2265);function l(){var e;let[r,t]=(0,i.useState)(null),[l,s]=(0,i.useState)(null),[a,d]=(0,i.useState)(null),[o,c]=(0,i.useState)(!1),[u,f]=(0,i.useState)(null),[h,g]=(0,i.useState)(!1),p=async()=>{if(!l){f("Please select an image first.");return}c(!0),f(null),d(null);try{let e=await fetch("/api/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:l})}),r=await e.json();if(!e.ok)throw Error(r.error||"An unknown error occurred.");d(r)}catch(e){f(e.message)}finally{c(!1)}};return(0,n.jsxs)("div",{style:{fontFamily:"Inter, sans-serif",maxWidth:900,margin:"40px auto",padding:20},children:[(0,n.jsx)("h1",{style:{marginBottom:10},children:"\uD83E\uDDE0 AI Car Damage Assessor"}),(0,n.jsxs)("p",{style:{marginBottom:30},children:["Upload an image to detect car damages using the ",(0,n.jsx)("strong",{children:"InsurTech-Damage-Audit"})," model."]}),(0,n.jsxs)("div",{style:{marginBottom:20},children:[(0,n.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{if(e.target.files&&e.target.files[0]){let r=e.target.files[0];t(r),f(null),d(null);let n=new FileReader;n.readAsDataURL(r),n.onload=()=>s(n.result),n.onerror=()=>f("Failed to read file.")}}}),(0,n.jsx)("button",{onClick:p,disabled:o,style:{padding:"10px 20px",marginLeft:10,borderRadius:6,border:"1px solid #ccc",backgroundColor:o?"#ccc":"#0070f3",color:"#fff",cursor:o?"not-allowed":"pointer"},children:o?"Analyzing...":"Analyze Image"})]}),u&&(0,n.jsxs)("p",{style:{color:"red"},children:["⚠️ ",u]}),(0,n.jsxs)("div",{style:{display:"flex",gap:30,alignItems:"flex-start"},children:[l&&(0,n.jsxs)("div",{style:{flex:1},children:[(0,n.jsx)("h3",{children:"Your Image"}),(0,n.jsx)("img",{src:l,alt:"Upload preview",style:{maxWidth:"100%",borderRadius:8,border:"1px solid #ddd"}})]}),a&&(0,n.jsxs)("div",{style:{flex:1},children:[(0,n.jsx)("h3",{children:"Results"}),(null==a?void 0:null===(e=a.predictions)||void 0===e?void 0:e.length)>0&&(0,n.jsx)("ul",{children:a.predictions.map((e,r)=>(0,n.jsxs)("li",{children:[(0,n.jsx)("strong",{children:e.class})," —"," ",e.severity?"Severity: ".concat(e.severity,"%"):"Confidence: ".concat((100*e.confidence).toFixed(1),"%")]},r))}),(null==a?void 0:a.damages_extracted)&&(0,n.jsxs)("div",{style:{marginTop:20},children:[(0,n.jsx)("h4",{children:"Structured Damage Summary"}),Object.entries(a.damages_extracted).map(e=>{let[r,t]=e;return(0,n.jsxs)("div",{style:{marginBottom:10},children:[(0,n.jsx)("h5",{style:{textTransform:"capitalize"},children:r}),(0,n.jsx)("ul",{children:t.map((e,r)=>(0,n.jsxs)("li",{children:[e.part," — ",e.type," (",null!==e.severity?"".concat(e.severity,"%"):"N/A",")"]},r))})]},r)})]}),(0,n.jsx)("button",{onClick:()=>g(!h),style:{marginTop:15,background:"#f0f0f0",border:"none",padding:"8px 12px",borderRadius:6,cursor:"pointer"},children:h?"Hide JSON":"Show JSON"}),h&&(0,n.jsx)("pre",{style:{backgroundColor:"#f8f8f8",padding:10,borderRadius:6,overflowX:"auto",marginTop:10,fontSize:12},children:JSON.stringify(a,null,2)})]})]})]})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=556)}),_N_E=e.O()}]);